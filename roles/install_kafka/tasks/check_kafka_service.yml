# ====================================================
# üîç –ü—Ä–æ–≤–µ—Ä–∫–∞, –∑–∞–ø—É—â–µ–Ω –ª–∏ —Å–µ—Ä–≤–∏—Å Kafka
# ====================================================

- name: Check if Kafka service is running
  systemd:
    name: kafka
    state: started
  register: kafka_service_status
  ignore_errors: true
  changed_when: false

# ====================================================
# ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Kafka –≤ "active", –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
# ====================================================

- name: Set Kafka status to active if the service is running
  set_fact:
    kafka_status: "active"
  when: not kafka_service_status.failed

# ====================================================
# ‚ùå –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Kafka –≤ "inactive", –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—â–µ–Ω
# ====================================================

- name: Set Kafka status to inactive if the service is not running
  set_fact:
    kafka_status: "inactive"
  when: kafka_service_status.failed