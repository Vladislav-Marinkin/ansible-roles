---
# ===============================================
# ‚òï –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Java (OpenJDK 11)
# ===============================================

- name: Install Java (OpenJDK 11) on Debian
  package:
    name: "{{ java_package_debian }}"
    state: present
  when: ansible_os_family == "Debian"

- name: Install Java (OpenJDK 11) on RedHat
  package:
    name: "{{ java_package_rethat }}"
    state: present
  when: ansible_os_family == "RedHat"

# ===============================================
# üë• –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≥—Ä—É–ø–ø—ã –¥–ª—è Kafka
# ===============================================

- name: Create kafka group
  group:
    name: "{{ kafka_group }}"
    state: present

- name: Create kafka user
  user:
    name: "{{ kafka_user }}"
    group: "{{ kafka_group }}"
    state: present

# ===============================================
# üìÇ –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è Kafka
# ===============================================

- name: Create Kafka directories
  file:
    path: "{{ item }}"
    state: directory
    owner: "{{ kafka_user }}"
    group: "{{ kafka_group }}"
    mode: "0755"
  with_items:
    - "{{ kafka_install_dir }}"
    - "{{ kafka_data_dir }}"
    - "{{ kafka_logs_dir }}"
    - "{{ kafka_config_dir }}"
