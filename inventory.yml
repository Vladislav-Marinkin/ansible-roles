all:
  children:
    web-servers:
      hosts:
        nginx:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          docker: true
          allow_ports: [443,80,8080,8081]

    monitoring-servers:
      hosts:
        monitoring:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          allow_ports: []

    gitlab-servers:
      hosts:
        gitlab-ci:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          allow_ports: []
        gitlab-runner:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          runner: true
          allow_ports: []

    docker-sworm:
      hosts:
        swarm-node-master-1:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          docker-sworm: true
          master: true
          allow_ports: [2377]
        swarm-node-worker-1:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          docker-sworm: true
          master: false
          allow_ports: []
        swarm-node-worker-2:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          docker-sworm: true
          master: false
          allow_ports: []
        swarm-node-worker-3:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          docker-sworm: true
          master: false
          allow_ports: []

    kafka-servers:
      hosts:
        kafka-node-1:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          role: 'controller'
          allow_ports: [9092,9093,9999]
        kafka-node-3:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          role: 'controller'
          allow_ports: [9092,9093,9999]
        kafka-node-2:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          role: 'broker'
          allow_ports: [9092,9093,9999]
        kafka-node-4:
          ansible_user: ansible
          ansible_become: yes
          ansible_become_user: root
          role: 'broker'
          allow_ports: [9092,9093,9999]
          
    new_servers:
      hosts: 
        192.168.1.18:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: nginx
        192.168.1.29:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: monitoring
        192.168.1.28:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: gitlab-runner
        192.168.1.23:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: gitlab-ci
        192.168.1.30:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: swarm-node-master-1
        192.168.1.31:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: swarm-node-worker-1
        192.168.1.33:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: swarm-node-worker-2
        192.168.1.32:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: swarm-node-worker-3
        192.168.1.38:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: test-node
        192.168.1.43:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: kafka-node-1
        192.168.1.45:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: kafka-node-2
        192.168.1.42:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: kafka-node-3
        192.168.1.44:
          ansible_user: root
          ansible_become: yes
          ansible_become_user: root
          hostname: kafka-node-4